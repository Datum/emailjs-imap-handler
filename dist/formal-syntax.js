'use strict';

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.verify = exports.COMMAND = exports.TAG = exports.RESP_SPECIALS = exports.QUOTED_SPECIALS = exports.LIST_WILDCARDS = exports.ATOM_SPECIALS = exports.TEXT_CHAR = exports.ASTRING_CHAR = exports.ATOM_CHAR = exports.DIGIT = exports.ALPHA = exports.DQUOTE = exports.CTL = exports.SP = exports.CHAR8 = exports.CHAR = undefined;

var _ramda = require('ramda');

function _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }

// IMAP Formal Syntax
// http://tools.ietf.org/html/rfc3501#section-9

var expandRange = function expandRange(start, end) {
  return String.fromCharCode.apply(String, (0, _ramda.without)([].concat(_toConsumableArray(Array(start).keys())), [].concat(_toConsumableArray(Array(end).keys()))));
};
var excludeChars = function excludeChars(source, exclude) {
  return (0, _ramda.without)(exclude.split(''), source.split('')).join('');
};

var CHAR = exports.CHAR = (0, _ramda.memoize)(function () {
  return expandRange(0x01, 0x7F);
});
var CHAR8 = exports.CHAR8 = (0, _ramda.memoize)(function () {
  return expandRange(0x01, 0xFF);
});
var SP = exports.SP = function SP() {
  return ' ';
};
var CTL = exports.CTL = (0, _ramda.memoize)(function () {
  return expandRange(0x00, 0x1F) + '\x7F';
});
var DQUOTE = exports.DQUOTE = function DQUOTE() {
  return '"';
};
var ALPHA = exports.ALPHA = (0, _ramda.memoize)(function () {
  return expandRange(0x41, 0x5A) + expandRange(0x61, 0x7A);
});
var DIGIT = exports.DIGIT = (0, _ramda.memoize)(function () {
  return expandRange(0x30, 0x39) + expandRange(0x61, 0x7A);
});
var ATOM_CHAR = exports.ATOM_CHAR = (0, _ramda.memoize)(function () {
  return excludeChars(CHAR(), ATOM_SPECIALS());
});
var ASTRING_CHAR = exports.ASTRING_CHAR = (0, _ramda.memoize)(function () {
  return ATOM_CHAR() + RESP_SPECIALS();
});
var TEXT_CHAR = exports.TEXT_CHAR = (0, _ramda.memoize)(function () {
  return excludeChars(CHAR(), '\r\n');
});
var ATOM_SPECIALS = exports.ATOM_SPECIALS = (0, _ramda.memoize)(function () {
  return '(' + ')' + '{' + SP() + CTL() + LIST_WILDCARDS() + QUOTED_SPECIALS() + RESP_SPECIALS();
});
var LIST_WILDCARDS = exports.LIST_WILDCARDS = function LIST_WILDCARDS() {
  return '%' + '*';
};
var QUOTED_SPECIALS = exports.QUOTED_SPECIALS = (0, _ramda.memoize)(function () {
  return DQUOTE() + '\\';
});
var RESP_SPECIALS = exports.RESP_SPECIALS = function RESP_SPECIALS() {
  return ']';
};
var TAG = exports.TAG = (0, _ramda.memoize)(function () {
  return excludeChars(ASTRING_CHAR(), '+');
});
var COMMAND = exports.COMMAND = (0, _ramda.memoize)(function () {
  return ALPHA() + DIGIT();
});
var verify = exports.verify = function verify(str, allowedChars) {
  for (var i = 0, len = str.length; i < len; i++) {
    if (allowedChars.indexOf(str.charAt(i)) < 0) {
      return i;
    }
  }
  return -1;
};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy9mb3JtYWwtc3ludGF4LmpzIl0sIm5hbWVzIjpbImV4cGFuZFJhbmdlIiwic3RhcnQiLCJlbmQiLCJTdHJpbmciLCJmcm9tQ2hhckNvZGUiLCJhcHBseSIsIkFycmF5Iiwia2V5cyIsImV4Y2x1ZGVDaGFycyIsInNvdXJjZSIsImV4Y2x1ZGUiLCJzcGxpdCIsImpvaW4iLCJDSEFSIiwiQ0hBUjgiLCJTUCIsIkNUTCIsIkRRVU9URSIsIkFMUEhBIiwiRElHSVQiLCJBVE9NX0NIQVIiLCJBVE9NX1NQRUNJQUxTIiwiQVNUUklOR19DSEFSIiwiUkVTUF9TUEVDSUFMUyIsIlRFWFRfQ0hBUiIsIkxJU1RfV0lMRENBUkRTIiwiUVVPVEVEX1NQRUNJQUxTIiwiVEFHIiwiQ09NTUFORCIsInZlcmlmeSIsInN0ciIsImFsbG93ZWRDaGFycyIsImkiLCJsZW4iLCJsZW5ndGgiLCJpbmRleE9mIiwiY2hhckF0Il0sIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQUE7Ozs7QUFFQTtBQUNBOztBQUVBLElBQU1BLGNBQWMsU0FBZEEsV0FBYyxDQUFDQyxLQUFELEVBQVFDLEdBQVI7QUFBQSxTQUFnQkMsT0FBT0MsWUFBUCxDQUFvQkMsS0FBcEIsQ0FBMEJGLE1BQTFCLEVBQWtDLGlEQUFZRyxNQUFNTCxLQUFOLEVBQWFNLElBQWIsRUFBWixpQ0FBc0NELE1BQU1KLEdBQU4sRUFBV0ssSUFBWCxFQUF0QyxHQUFsQyxDQUFoQjtBQUFBLENBQXBCO0FBQ0EsSUFBTUMsZUFBZSxTQUFmQSxZQUFlLENBQUNDLE1BQUQsRUFBU0MsT0FBVDtBQUFBLFNBQXFCLG9CQUFRQSxRQUFRQyxLQUFSLENBQWMsRUFBZCxDQUFSLEVBQTJCRixPQUFPRSxLQUFQLENBQWEsRUFBYixDQUEzQixFQUE2Q0MsSUFBN0MsQ0FBa0QsRUFBbEQsQ0FBckI7QUFBQSxDQUFyQjs7QUFFTyxJQUFNQyxzQkFBTyxvQkFBUTtBQUFBLFNBQU1iLFlBQVksSUFBWixFQUFrQixJQUFsQixDQUFOO0FBQUEsQ0FBUixDQUFiO0FBQ0EsSUFBTWMsd0JBQVEsb0JBQVE7QUFBQSxTQUFNZCxZQUFZLElBQVosRUFBa0IsSUFBbEIsQ0FBTjtBQUFBLENBQVIsQ0FBZDtBQUNBLElBQU1lLGtCQUFLLFNBQUxBLEVBQUs7QUFBQSxTQUFNLEdBQU47QUFBQSxDQUFYO0FBQ0EsSUFBTUMsb0JBQU0sb0JBQVE7QUFBQSxTQUFNaEIsWUFBWSxJQUFaLEVBQWtCLElBQWxCLElBQTBCLE1BQWhDO0FBQUEsQ0FBUixDQUFaO0FBQ0EsSUFBTWlCLDBCQUFTLFNBQVRBLE1BQVM7QUFBQSxTQUFNLEdBQU47QUFBQSxDQUFmO0FBQ0EsSUFBTUMsd0JBQVEsb0JBQVE7QUFBQSxTQUFNbEIsWUFBWSxJQUFaLEVBQWtCLElBQWxCLElBQTBCQSxZQUFZLElBQVosRUFBa0IsSUFBbEIsQ0FBaEM7QUFBQSxDQUFSLENBQWQ7QUFDQSxJQUFNbUIsd0JBQVEsb0JBQVE7QUFBQSxTQUFNbkIsWUFBWSxJQUFaLEVBQWtCLElBQWxCLElBQTBCQSxZQUFZLElBQVosRUFBa0IsSUFBbEIsQ0FBaEM7QUFBQSxDQUFSLENBQWQ7QUFDQSxJQUFNb0IsZ0NBQVksb0JBQVE7QUFBQSxTQUFNWixhQUFhSyxNQUFiLEVBQXFCUSxlQUFyQixDQUFOO0FBQUEsQ0FBUixDQUFsQjtBQUNBLElBQU1DLHNDQUFlLG9CQUFRO0FBQUEsU0FBTUYsY0FBY0csZUFBcEI7QUFBQSxDQUFSLENBQXJCO0FBQ0EsSUFBTUMsZ0NBQVksb0JBQVE7QUFBQSxTQUFNaEIsYUFBYUssTUFBYixFQUFxQixNQUFyQixDQUFOO0FBQUEsQ0FBUixDQUFsQjtBQUNBLElBQU1RLHdDQUFnQixvQkFBUTtBQUFBLFNBQU0sTUFBTSxHQUFOLEdBQVksR0FBWixHQUFrQk4sSUFBbEIsR0FBeUJDLEtBQXpCLEdBQWlDUyxnQkFBakMsR0FBb0RDLGlCQUFwRCxHQUF3RUgsZUFBOUU7QUFBQSxDQUFSLENBQXRCO0FBQ0EsSUFBTUUsMENBQWlCLFNBQWpCQSxjQUFpQjtBQUFBLFNBQU0sTUFBTSxHQUFaO0FBQUEsQ0FBdkI7QUFDQSxJQUFNQyw0Q0FBa0Isb0JBQVE7QUFBQSxTQUFNVCxXQUFXLElBQWpCO0FBQUEsQ0FBUixDQUF4QjtBQUNBLElBQU1NLHdDQUFnQixTQUFoQkEsYUFBZ0I7QUFBQSxTQUFNLEdBQU47QUFBQSxDQUF0QjtBQUNBLElBQU1JLG9CQUFNLG9CQUFRO0FBQUEsU0FBTW5CLGFBQWFjLGNBQWIsRUFBNkIsR0FBN0IsQ0FBTjtBQUFBLENBQVIsQ0FBWjtBQUNBLElBQU1NLDRCQUFVLG9CQUFRO0FBQUEsU0FBTVYsVUFBVUMsT0FBaEI7QUFBQSxDQUFSLENBQWhCO0FBQ0EsSUFBTVUsMEJBQVMsU0FBVEEsTUFBUyxDQUFVQyxHQUFWLEVBQWVDLFlBQWYsRUFBNkI7QUFDakQsT0FBSyxJQUFJQyxJQUFJLENBQVIsRUFBV0MsTUFBTUgsSUFBSUksTUFBMUIsRUFBa0NGLElBQUlDLEdBQXRDLEVBQTJDRCxHQUEzQyxFQUFnRDtBQUM5QyxRQUFJRCxhQUFhSSxPQUFiLENBQXFCTCxJQUFJTSxNQUFKLENBQVdKLENBQVgsQ0FBckIsSUFBc0MsQ0FBMUMsRUFBNkM7QUFDM0MsYUFBT0EsQ0FBUDtBQUNEO0FBQ0Y7QUFDRCxTQUFPLENBQUMsQ0FBUjtBQUNELENBUE0iLCJmaWxlIjoiZm9ybWFsLXN5bnRheC5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IG1lbW9pemUsIHdpdGhvdXQgfSBmcm9tICdyYW1kYSdcblxuLy8gSU1BUCBGb3JtYWwgU3ludGF4XG4vLyBodHRwOi8vdG9vbHMuaWV0Zi5vcmcvaHRtbC9yZmMzNTAxI3NlY3Rpb24tOVxuXG5jb25zdCBleHBhbmRSYW5nZSA9IChzdGFydCwgZW5kKSA9PiBTdHJpbmcuZnJvbUNoYXJDb2RlLmFwcGx5KFN0cmluZywgd2l0aG91dChbLi4uQXJyYXkoc3RhcnQpLmtleXMoKV0sIFsuLi5BcnJheShlbmQpLmtleXMoKV0pKVxuY29uc3QgZXhjbHVkZUNoYXJzID0gKHNvdXJjZSwgZXhjbHVkZSkgPT4gd2l0aG91dChleGNsdWRlLnNwbGl0KCcnKSwgc291cmNlLnNwbGl0KCcnKSkuam9pbignJylcblxuZXhwb3J0IGNvbnN0IENIQVIgPSBtZW1vaXplKCgpID0+IGV4cGFuZFJhbmdlKDB4MDEsIDB4N0YpKVxuZXhwb3J0IGNvbnN0IENIQVI4ID0gbWVtb2l6ZSgoKSA9PiBleHBhbmRSYW5nZSgweDAxLCAweEZGKSlcbmV4cG9ydCBjb25zdCBTUCA9ICgpID0+ICcgJ1xuZXhwb3J0IGNvbnN0IENUTCA9IG1lbW9pemUoKCkgPT4gZXhwYW5kUmFuZ2UoMHgwMCwgMHgxRikgKyAnXFx4N0YnKVxuZXhwb3J0IGNvbnN0IERRVU9URSA9ICgpID0+ICdcIidcbmV4cG9ydCBjb25zdCBBTFBIQSA9IG1lbW9pemUoKCkgPT4gZXhwYW5kUmFuZ2UoMHg0MSwgMHg1QSkgKyBleHBhbmRSYW5nZSgweDYxLCAweDdBKSlcbmV4cG9ydCBjb25zdCBESUdJVCA9IG1lbW9pemUoKCkgPT4gZXhwYW5kUmFuZ2UoMHgzMCwgMHgzOSkgKyBleHBhbmRSYW5nZSgweDYxLCAweDdBKSlcbmV4cG9ydCBjb25zdCBBVE9NX0NIQVIgPSBtZW1vaXplKCgpID0+IGV4Y2x1ZGVDaGFycyhDSEFSKCksIEFUT01fU1BFQ0lBTFMoKSkpXG5leHBvcnQgY29uc3QgQVNUUklOR19DSEFSID0gbWVtb2l6ZSgoKSA9PiBBVE9NX0NIQVIoKSArIFJFU1BfU1BFQ0lBTFMoKSlcbmV4cG9ydCBjb25zdCBURVhUX0NIQVIgPSBtZW1vaXplKCgpID0+IGV4Y2x1ZGVDaGFycyhDSEFSKCksICdcXHJcXG4nKSlcbmV4cG9ydCBjb25zdCBBVE9NX1NQRUNJQUxTID0gbWVtb2l6ZSgoKSA9PiAnKCcgKyAnKScgKyAneycgKyBTUCgpICsgQ1RMKCkgKyBMSVNUX1dJTERDQVJEUygpICsgUVVPVEVEX1NQRUNJQUxTKCkgKyBSRVNQX1NQRUNJQUxTKCkpXG5leHBvcnQgY29uc3QgTElTVF9XSUxEQ0FSRFMgPSAoKSA9PiAnJScgKyAnKidcbmV4cG9ydCBjb25zdCBRVU9URURfU1BFQ0lBTFMgPSBtZW1vaXplKCgpID0+IERRVU9URSgpICsgJ1xcXFwnKVxuZXhwb3J0IGNvbnN0IFJFU1BfU1BFQ0lBTFMgPSAoKSA9PiAnXSdcbmV4cG9ydCBjb25zdCBUQUcgPSBtZW1vaXplKCgpID0+IGV4Y2x1ZGVDaGFycyhBU1RSSU5HX0NIQVIoKSwgJysnKSlcbmV4cG9ydCBjb25zdCBDT01NQU5EID0gbWVtb2l6ZSgoKSA9PiBBTFBIQSgpICsgRElHSVQoKSlcbmV4cG9ydCBjb25zdCB2ZXJpZnkgPSBmdW5jdGlvbiAoc3RyLCBhbGxvd2VkQ2hhcnMpIHtcbiAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IHN0ci5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgIGlmIChhbGxvd2VkQ2hhcnMuaW5kZXhPZihzdHIuY2hhckF0KGkpKSA8IDApIHtcbiAgICAgIHJldHVybiBpXG4gICAgfVxuICB9XG4gIHJldHVybiAtMVxufVxuIl19